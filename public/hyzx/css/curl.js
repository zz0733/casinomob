(function(global){var version="0.8.11",curlName="curl",defineName="define",bootScriptAttr="data-curl-run",bootScript,userCfg,prevCurl,prevDefine,doc=global.document,head=doc&&(doc.head||doc.getElementsByTagName("head")[0]),insertBeforeEl=head&&head.getElementsByTagName("base")[0]||null,msgUsingExports={},msgFactoryExecuted={},activeScripts={},readyStates="addEventListener" in global?{}:{loaded:1,complete:1},cleanPrototype={},toString=cleanPrototype.toString,undef,cache={},urlCache={},preload=false,argsNet,dontAddExtRx=/\?|\.js\b/,absUrlRx=/^\/|^[^:]+:\/\/|^[A-Za-z]:[\\/]/,findDotsRx=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,removeCommentsRx=/\/\*[\s\S]*?\*\/|\/\/.*?[\n\r]/g,findRValueRequiresRx=/require\s*\(\s*(["'])(.*?[^\\])\1\s*\)|[^\\]?(["'])/g,splitCommaSepRx=/\s*,\s*/,cjsGetters,core;function noop(){}function isType(obj,type){return toString.call(obj).indexOf("[object "+type)==0}function normalizePkgDescriptor(descriptor,isPkg){var main;descriptor.path=removeEndSlash(descriptor.path||descriptor.location||"");if(isPkg){main=descriptor.main||"./main";if(!isRelUrl(main)){main="./"+main}descriptor.main=reduceLeadingDots(main,descriptor.name+"/")}descriptor.config=descriptor.config;return descriptor}function isRelUrl(it){return it.charAt(0)=="."}function isAbsUrl(it){return absUrlRx.test(it)}function joinPath(path,file){return removeEndSlash(path)+"/"+file}function removeEndSlash(path){return path&&path.charAt(path.length-1)=="/"?path.substr(0,path.length-1):path}function reduceLeadingDots(childId,baseId){var removeLevels,normId,levels,isRelative,diff;removeLevels=1;normId=childId;if(isRelUrl(normId)){isRelative=true;normId=normId.replace(findDotsRx,function(m,dot,doubleDot,remainder){if(doubleDot){removeLevels++}return remainder||""})}if(isRelative){levels=baseId.split("/");diff=levels.length-removeLevels;if(diff<0){return childId}levels.splice(diff,removeLevels);return levels.concat(normId||[]).join("/")}else{return normId}}function pluginParts(id){var delPos=id.indexOf("!");return{resourceId:id.substr(delPos+1),pluginId:delPos>=0&&id.substr(0,delPos)}}function Begetter(){}function beget(parent,mixin){Begetter.prototype=parent||cleanPrototype;var child=new Begetter();Begetter.prototype=cleanPrototype;for(var p in mixin){child[p]=mixin[p]}return child}function Promise(){var self,thens,complete;self=this;thens=[];function then(resolved,rejected,progressed){thens.push([resolved,rejected,progressed])}function notify(which,arg){var aThen,cb,i=0;while((aThen=thens[i++])){cb=aThen[which];if(cb){cb(arg)}}}complete=function promiseComplete(success,arg){then=success?function(resolved,rejected){resolved&&resolved(arg)}:function(resolved,rejected){rejected&&rejected(arg)};complete=noop;notify(success?0:1,arg);notify=noop;thens=undef};this.then=function(resolved,rejected,progressed){then(resolved,rejected,progressed);return self};this.resolve=function(val){self.resolved=val;complete(true,val)};this.reject=function(ex){self.rejected=ex;complete(false,ex)};this.progress=function(msg){notify(2,msg)}}function isPromise(o){return o instanceof Promise||o instanceof CurlApi}function when(promiseOrValue,callback,errback,progback){if(isPromise(promiseOrValue)){return promiseOrValue.then(callback,errback,progback)}else{return callback(promiseOrValue)}}function countdown(howMany,lambda,completed){var result;return function(){if(--howMany>=0&&lambda){result=lambda.apply(undef,arguments)}if(howMany==0&&completed){completed(result)}return result}}core={toAbsId:function(id,parentId,cfg){var absId,pluginId,parts;absId=reduceLeadingDots(id,parentId);if(isRelUrl(absId)){return absId}parts=pluginParts(absId);pluginId=parts.pluginId;absId=pluginId||parts.resourceId;if(absId in cfg.pathMap){absId=cfg.pathMap[absId].main||absId}if(pluginId){if(pluginId.indexOf("/")<0&&!(pluginId in cfg.pathMap)){absId=joinPath(cfg.pluginPath,pluginId)}absId=absId+"!"+parts.resourceId}return absId},createContext:function(cfg,baseId,depNames,isPreload){var def;def=new Promise();def.id=baseId||"";def.isPreload=isPreload;def.depNames=depNames;def.config=cfg;function toAbsId(childId,checkPlugins){var absId,parts,plugin;absId=core.toAbsId(childId,def.id,cfg);if(!checkPlugins){return absId}parts=pluginParts(absId);if(!parts.pluginId){return absId}plugin=cache[parts.pluginId];if("normalize" in plugin){parts.resourceId=plugin.normalize(parts.resourceId,toAbsId,def.config)||""}else{parts.resourceId=toAbsId(parts.resourceId)}return parts.pluginId+"!"+parts.resourceId}function toUrl(n){return core.resolvePathInfo(toAbsId(n,true),cfg).url}function localRequire(ids,callback,errback){var cb,rvid,childDef,earlyExport;cb=callback&&function(){callback.apply(undef,arguments[0])};if(isType(ids,"String")){if(cb){throw new Error("require(id, callback) not allowed")}rvid=toAbsId(ids,true);childDef=cache[rvid];if(!(rvid in cache)){throw new Error("Module not resolved: "+rvid)}earlyExport=isPromise(childDef)&&childDef.exports;return earlyExport||childDef}else{when(core.getDeps(core.createContext(cfg,def.id,ids,isPreload)),cb,errback)}}def.require=localRequire;localRequire.toUrl=toUrl;def.toAbsId=toAbsId;return def},createResourceDef:function(cfg,id,isPreload){var def,origResolve,execute;def=core.createContext(cfg,id,undef,isPreload);origResolve=def.resolve;execute=countdown(1,function(deps){def.deps=deps;try{return core.executeDefFunc(def)}catch(ex){def.reject(ex)}});def.resolve=function resolve(deps){when(isPreload||preload,function(){origResolve((cache[def.id]=urlCache[def.url]=execute(deps)))})};def.exportsReady=function executeFactory(deps){when(isPreload||preload,function(){if(def.exports){execute(deps);def.progress(msgFactoryExecuted)}})};return def},createPluginDef:function(cfg,id,resId,isPreload){var def;def=core.createContext(cfg,resId,undef,isPreload);return def},getCjsRequire:function(def){return def.require},getCjsExports:function(def){return def.exports||(def.exports={})},getCjsModule:function(def){var module=def.module;if(!module){module=def.module={id:def.id,uri:core.getDefUrl(def),exports:core.getCjsExports(def),config:function(){return def.config}};module.exports=module.exports}return module},getDefUrl:function(def){return def.url||(def.url=core.checkToAddJsExt(def.require.toUrl(def.id),def.config))},setApi:function(cfg){var apiName,defName,apiObj,defObj,failMsg,okToOverwrite;apiName=curlName;defName=defineName;apiObj=defObj=global;failMsg=" already exists";if(cfg){okToOverwrite=cfg.overwriteApi||cfg.overwriteApi;apiName=cfg.apiName||cfg.apiName||apiName;apiObj=cfg.apiContext||cfg.apiContext||apiObj;defName=cfg.defineName||cfg.defineName||defName;defObj=cfg.defineContext||cfg.defineContext||defObj;if(prevCurl&&isType(prevCurl,"Function")){global[curlName]=prevCurl}prevCurl=null;if(prevDefine&&isType(prevDefine,"Function")){global[defineName]=prevDefine}prevDefine=null;if(!okToOverwrite){if(apiObj[apiName]&&apiObj[apiName]!=_curl){throw new Error(apiName+failMsg)}if(defObj[defName]&&defObj[defName]!=define){throw new Error(defName+failMsg)}}}apiObj[apiName]=_curl;defObj[defName]=define},config:function(cfg){var prevCfg,newCfg,pluginCfgs,p;if("baseUrl" in cfg){cfg.baseUrl=cfg.baseUrl}if("main" in cfg){cfg.main=cfg.main}if("preloads" in cfg){cfg.preloads=cfg.preloads}if("pluginPath" in cfg){cfg.pluginPath=cfg.pluginPath}if("dontAddFileExt" in cfg||cfg.dontAddFileExt){cfg.dontAddFileExt=new RegExp(cfg.dontAddFileExt||cfg.dontAddFileExt)}prevCfg=userCfg;newCfg=beget(prevCfg,cfg);newCfg.pathMap=beget(prevCfg.pathMap);pluginCfgs=cfg.plugins||{};newCfg.plugins=beget(prevCfg.plugins);newCfg.paths=beget(prevCfg.paths,cfg.paths);newCfg.packages=beget(prevCfg.packages,cfg.packages);newCfg.pathList=[];function fixAndPushPaths(coll,isPkg){var id,pluginId,data,parts,currCfg,info;for(var name in coll){data=coll[name];if(isType(data,"String")){data={path:coll[name]}}data.name=data.name||name;currCfg=newCfg;parts=pluginParts(removeEndSlash(data.name));id=parts.resourceId;pluginId=parts.pluginId;if(pluginId){currCfg=pluginCfgs[pluginId];if(!currCfg){currCfg=pluginCfgs[pluginId]=beget(newCfg);currCfg.pathMap=beget(newCfg.pathMap);currCfg.pathList=[]}delete coll[name]}info=normalizePkgDescriptor(data,isPkg);if(info.config){info.config=beget(newCfg,info.config)}info.specificity=id.split("/").length;if(id){currCfg.pathMap[id]=info;currCfg.pathList.push(id)}else{currCfg.baseUrl=core.resolveUrl(data.path,newCfg)}}}function convertPathMatcher(cfg){var pathMap=cfg.pathMap;cfg.pathRx=new RegExp("^("+cfg.pathList.sort(function(a,b){return pathMap[b].specificity-pathMap[a].specificity}).join("|").replace(/\/|\./g,"\\$&")+")(?=\\/|$)");delete cfg.pathList}fixAndPushPaths(cfg.packages,true);fixAndPushPaths(cfg.paths,false);for(p in pluginCfgs){var absId=core.toAbsId(p+"!","",newCfg);newCfg.plugins[absId.substr(0,absId.length-1)]=pluginCfgs[p]}pluginCfgs=newCfg.plugins;for(p in pluginCfgs){pluginCfgs[p]=beget(newCfg,pluginCfgs[p]);var pathList=pluginCfgs[p].pathList;if(pathList){pluginCfgs[p].pathList=pathList.concat(newCfg.pathList);convertPathMatcher(pluginCfgs[p])}}for(p in prevCfg.pathMap){if(!newCfg.pathMap.hasOwnProperty(p)){newCfg.pathList.push(p)}}convertPathMatcher(newCfg);return newCfg},resolvePathInfo:function(absId,cfg){var pathMap,pathInfo,path,pkgCfg;pathMap=cfg.pathMap;if(!isAbsUrl(absId)){path=absId.replace(cfg.pathRx,function(match){pathInfo=pathMap[match]||{};pkgCfg=pathInfo.config;return pathInfo.path||""})}else{path=absId}return{config:pkgCfg||userCfg,url:core.resolveUrl(path,cfg)}},resolveUrl:function(path,cfg){var baseUrl=cfg.baseUrl;return baseUrl&&!isAbsUrl(path)?joinPath(baseUrl,path):path},checkToAddJsExt:function(url,cfg){return url+((cfg||userCfg).dontAddFileExt.test(url)?"":".js")},loadScript:function(def,success,failure){var el=doc.createElement("script");function process(ev){ev=ev||global.event;if(ev.type=="load"||readyStates[el.readyState]){delete activeScripts[def.id];el.onload=el.onreadystatechange=el.onerror="";success()}}function fail(e){failure(new Error("Syntax or http error: "+def.url))}el.onload=el.onreadystatechange=process;el.onerror=fail;el.type=def.mimetype||"text/javascript";el.charset="utf-8";el.async=!def.order;el.src=def.url+"?v="+window.top.rcVersion;activeScripts[def.id]=el;head.insertBefore(el,insertBeforeEl);return el},extractCjsDeps:function(defFunc){var source,ids=[],currQuote;source=typeof defFunc=="string"?defFunc:defFunc.toSource?defFunc.toSource():defFunc.toString();source.replace(removeCommentsRx,"").replace(findRValueRequiresRx,function(m,rq,id,qq){if(qq){currQuote=currQuote==qq?undef:currQuote}else{if(!currQuote){ids.push(id)}}return""});return ids},fixArgs:function(args){var id,deps,defFunc,defFuncArity,len,cjs;len=args.length;defFunc=args[len-1];defFuncArity=isType(defFunc,"Function")?defFunc.length:-1;if(len==2){if(isType(args[0],"Array")){deps=args[0]}else{id=args[0]}}else{if(len==3){id=args[0];deps=args[1]}}if(!deps&&defFuncArity>0){cjs=true;deps=["require","exports","module"].slice(0,defFuncArity).concat(core.extractCjsDeps(defFunc))}return{id:id,deps:deps||[],res:defFuncArity>=0?defFunc:function(){return defFunc},cjs:cjs}},executeDefFunc:function(def){var resource,moduleThis;moduleThis=def.cjs?def.exports:undef;resource=def.res.apply(moduleThis,def.deps);if(resource===undef&&def.exports){resource=def.module?(def.exports=def.module.exports):def.exports}return resource},defineResource:function(def,args){def.res=args.res;def.cjs=args.cjs;def.depNames=args.deps;core.getDeps(def)},getDeps:function(parentDef){var i,names,deps,len,dep,completed,name,exportCollector,resolveCollector;deps=[];names=parentDef.depNames;len=names.length;if(names.length==0){allResolved()}function collect(dep,index,alsoExport){deps[index]=dep;if(alsoExport){exportCollector(dep,index)}}exportCollector=countdown(len,collect,allExportsReady);resolveCollector=countdown(len,collect,allResolved);for(i=0;i<len;i++){name=names[i];if(name in cjsGetters){resolveCollector(cjsGetters[name](parentDef),i,true);if(parentDef.exports){parentDef.progress(msgUsingExports)}}else{if(!name){resolveCollector(undef,i,true)}else{getDep(name,i)}}}return parentDef;function getDep(name,index){var resolveOnce,exportOnce,childDef,earlyExport;resolveOnce=countdown(1,function(dep){exportOnce(dep);resolveCollector(dep,index)});exportOnce=countdown(1,function(dep){exportCollector(dep,index)});childDef=core.fetchDep(name,parentDef);earlyExport=isPromise(childDef)&&childDef.exports;if(earlyExport){exportOnce(earlyExport)}when(childDef,resolveOnce,parentDef.reject,parentDef.exports&&function(msg){if(childDef.exports){if(msg==msgUsingExports){exportOnce(childDef.exports)}else{if(msg==msgFactoryExecuted){resolveOnce(childDef.exports)}}}})}function allResolved(){parentDef.resolve(deps)}function allExportsReady(){parentDef.exportsReady&&parentDef.exportsReady(deps)}},fetchResDef:function(def){core.getDefUrl(def);core.loadScript(def,function(){var args=argsNet;argsNet=undef;if(def.useNet!==false){if(!args||args.ex){def.reject(new Error(((args&&args.ex)||"define() missing or duplicated: "+def.url)))}else{core.defineResource(def,args)}}},def.reject);return def},fetchDep:function(depName,parentDef){var toAbsId,isPreload,parentCfg,parts,absId,mainId,loaderId,pluginId,resId,pathInfo,def,tempDef,resCfg;toAbsId=parentDef.toAbsId;isPreload=parentDef.isPreload;parentCfg=parentDef.config||userCfg;absId=toAbsId(depName);if(absId in cache){mainId=absId}else{parts=pluginParts(absId);resId=parts.resourceId;mainId=parts.pluginId||resId;pathInfo=core.resolvePathInfo(mainId,parentCfg)}if(!(absId in cache)){resCfg=core.resolvePathInfo(resId,parentCfg).config;if(parts.pluginId){loaderId=mainId}else{loaderId=resCfg.moduleLoader||resCfg.moduleLoader||resCfg.loader||resCfg.loader;if(loaderId){resId=mainId;mainId=loaderId;pathInfo=core.resolvePathInfo(loaderId,parentCfg)}}}if(mainId in cache){def=cache[mainId]}else{if(pathInfo.url in urlCache){def=cache[mainId]=urlCache[pathInfo.url]}else{def=core.createResourceDef(resCfg,mainId,isPreload);def.url=core.checkToAddJsExt(pathInfo.url,pathInfo.config);cache[mainId]=urlCache[pathInfo.url]=def;core.fetchResDef(def)}}if(mainId==loaderId){if(parts.pluginId&&parentCfg.plugins[parts.pluginId]){resCfg=parentCfg.plugins[parts.pluginId]}tempDef=new Promise();when(def,function(plugin){var normalizedDef,fullId,dynamic;dynamic=plugin.dynamic;if("normalize" in plugin){resId=plugin.normalize(resId,toAbsId,def.config)||""}else{resId=toAbsId(resId)}fullId=loaderId+"!"+resId;normalizedDef=cache[fullId];if(!(fullId in cache)){normalizedDef=core.createPluginDef(resCfg,fullId,resId,isPreload);if(!dynamic){cache[fullId]=normalizedDef}var loaded=function(res){if(!dynamic){cache[fullId]=res}normalizedDef.resolve(res)};loaded.resolve=loaded;loaded.reject=loaded.error=normalizedDef.reject;plugin.load(resId,normalizedDef.require,loaded,resCfg)}if(tempDef!=normalizedDef){when(normalizedDef,tempDef.resolve,tempDef.reject,tempDef.progress)}},tempDef.reject)}return tempDef||def},getCurrentDefName:function(){var def;if(!isType(global.opera,"Opera")){for(var d in activeScripts){if(activeScripts[d].readyState=="interactive"){def=d;break}}}return def},findScript:function(predicate){var i=0,scripts,script;scripts=doc&&(doc.scripts||doc.getElementsByTagName("script"));while(scripts&&(script=scripts[i++])){if(predicate(script)){return script}}},extractDataAttrConfig:function(){var script,attr="";script=core.findScript(function(script){var run;run=script.getAttribute(bootScriptAttr);if(run){attr=run}return run});if(script){script.setAttribute(bootScriptAttr,"")}return attr},bootScript:function(){var urls=bootScript.split(splitCommaSepRx);if(urls.length){load()}function load(){core.loadScript({url:urls.shift()},check,check)}function check(){if(bootScript){if(urls.length){core.nextTurn(fail);load()}else{fail("run.js script did not run.")}}}function fail(msg){throw new Error(msg||"Primary run.js failed. Trying fallback.")}},nextTurn:function(task){setTimeout(task,0)}};cjsGetters={require:core.getCjsRequire,exports:core.getCjsExports,module:core.getCjsModule};function _curl(){var args,promise,cfg;bootScript="";args=[].slice.call(arguments);if(isType(args[0],"Object")){cfg=args.shift();promise=_config(cfg)}return new CurlApi(args[0],args[1],args[2],promise)}function _config(cfg,callback,errback){var pPromise,main,fallback;bootScript="";if(cfg){core.setApi(cfg);userCfg=core.config(cfg);if("preloads" in cfg){pPromise=new CurlApi(cfg.preloads,undef,errback,preload,true);core.nextTurn(function(){preload=pPromise})}main=cfg.main;if(main){return new CurlApi(main,callback,errback)}}}function CurlApi(ids,callback,errback,waitFor,isPreload){var then,ctx;ctx=core.createContext(userCfg,undef,[].concat(ids),isPreload);this["then"]=this.then=then=function(resolved,rejected){when(ctx,function(deps){if(resolved){resolved.apply(undef,deps)}},function(ex){if(rejected){rejected(ex)}else{throw ex}});return this};this["next"]=function(ids,cb,eb){return new CurlApi(ids,cb,eb,ctx)};this["config"]=_config;if(callback||errback){then(callback,errback)}core.nextTurn(function(){when(isPreload||preload,function(){when(waitFor,function(){core.getDeps(ctx)},errback)})})}_curl.version=version;_curl.config=_config;function _define(args){var id,def,pathInfo;id=args.id;if(id==undef){if(argsNet!==undef){argsNet={ex:"Multiple anonymous defines encountered"}}else{if(!(id=core.getCurrentDefName())){argsNet=args}}}if(id!=undef){def=cache[id];if(!(id in cache)){pathInfo=core.resolvePathInfo(id,userCfg);def=core.createResourceDef(pathInfo.config,id);cache[id]=def}if(!isPromise(def)){throw new Error("duplicate define: "+id)}def.useNet=false;core.defineResource(def,args)}}function define(){var args=core.fixArgs(arguments);_define(args)}define.amd={plugins:true,jQuery:true,curl:version};userCfg={baseUrl:"",pluginPath:"curl/plugin",dontAddFileExt:dontAddExtRx,paths:{},packages:{},plugins:{},pathMap:{},pathRx:/$^/};prevCurl=global[curlName];prevDefine=global[defineName];if(prevCurl&&isType(prevCurl,"Object")){global[curlName]=undef;_config(prevCurl)}else{core.setApi()}bootScript=core.extractDataAttrConfig();if(bootScript){core.nextTurn(core.bootScript)}cache[curlName]=_curl;cache["curl/_privileged"]={core:core,cache:cache,config:function(){return userCfg},_define:_define,_curl:_curl,Promise:Promise}}(this.window||(typeof global!="undefined"&&global)||this));